using System;
using System.Collections.Generic;
using System.Linq;
using System.Net;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Navigation;
using Microsoft.Phone.Controls;
using Microsoft.Phone.Shell;
using PhoneApp2.Resources;
using System.Windows.Media;
using Windows.Web.Http;
using Newtonsoft.Json;
using Newtonsoft.Json.Linq;

namespace PhoneApp2
{
    public partial class MainPage : PhoneApplicationPage
    {
        // Constructor
        public MainPage()
        {
            InitializeComponent();
            // Sample code to localize the ApplicationBar
            //BuildLocalizedApplicationBar();
        }

        private void btnMapMainPage_Click(object sender, RoutedEventArgs e)
        {
            NavigationService.Navigate(new Uri("/MapPage.xaml", UriKind.Relative));
        }

        private void btnGreenArenaMainPage_Click(object sender, RoutedEventArgs e)
        {
            NavigationService.Navigate(new Uri("/GreenArenaPage.xaml", UriKind.Relative));
        }

        private string helperFunc() {
            return "[{\"id\":1,\"latitude\":43.853599,\"longitude\":18.405989,\"Temperature\":25,\"Humidity\":25,\"Pollution\":0.13},{\"id\":1,\"latitude\":43.853599,\"longitude\":18.405989,\"Temperature\":25,\"Humidity\":25,\"Pollution\":0.53},{\"id\":1,\"latitude\":43.853599,\"longitude\":18.405989,\"Temperature\":24,\"Humidity\":25,\"Pollution\":0.05},{\"id\":1,\"latitude\":43.853599,\"longitude\":18.405989,\"Temperature\":25,\"Humidity\":25,\"Pollution\":0.05},{\"id\":1,\"latitude\":43.853599,\"longitude\":18.405989,\"Temperature\":0,\"Humidity\":149,\"Pollution\":0},{\"id\":1,\"latitude\":43.853599,\"longitude\":18.405989,\"Temperature\":152,\"Humidity\":241,\"Pollution\":0},{\"id\":1,\"latitude\":43.853599,\"longitude\":18.405989,\"Temperature\":12,\"Humidity\":12,\"Pollution\":0.05},{\"id\":1,\"latitude\":43.853599,\"longitude\":18.405989,\"Temperature\":25,\"Humidity\":26,\"Pollution\":0.05},{\"id\":1,\"latitude\":43.853599,\"longitude\":18.405989,\"Temperature\":12,\"Humidity\":12,\"Pollution\":0.04},{\"id\":1,\"latitude\":43.853599,\"longitude\":18.405989,\"Temperature\":25,\"Humidity\":25,\"Pollution\":0.04},{\"id\":1,\"latitude\":43.853599,\"longitude\":18.405989,\"Temperature\":12,\"Humidity\":12,\"Pollution\":0.03},{\"id\":1,\"latitude\":43.853599,\"longitude\":18.405989,\"Temperature\":12,\"Humidity\":13,\"Pollution\":0.04},{\"id\":1,\"latitude\":43.853599,\"longitude\":18.405989,\"Temperature\":25,\"Humidity\":26,\"Pollution\":0.04},{\"id\":1,\"latitude\":43.853599,\"longitude\":18.405989,\"Temperature\":12,\"Humidity\":13,\"Pollution\":0.03},{\"id\":1,\"latitude\":43.853599,\"longitude\":18.405989,\"Temperature\":25,\"Humidity\":26,\"Pollution\":0.03},{\"id\":1,\"latitude\":43.853599,\"longitude\":18.405989,\"Temperature\":25,\"Humidity\":25,\"Pollution\":0},{\"id\":1,\"latitude\":43.853599,\"longitude\":18.405989,\"Temperature\":25,\"Humidity\":25,\"Pollution\":0.01},{\"id\":1,\"latitude\":43.853599,\"longitude\":18.405989,\"Temperature\":25,\"Humidity\":26,\"Pollution\":0.02},{\"id\":1,\"latitude\":43.853599,\"longitude\":18.405989,\"Temperature\":25,\"Humidity\":27,\"Pollution\":0.02},{\"id\":1,\"latitude\":43.853599,\"longitude\":18.405989,\"Temperature\":12,\"Humidity\":13,\"Pollution\":0},{\"id\":1,\"latitude\":43.853599,\"longitude\":18.405989,\"Temperature\":0,\"Humidity\":0,\"Pollution\":0},{\"id\":1,\"latitude\":43.853599,\"longitude\":18.405989,\"Temperature\":60,\"Humidity\":60,\"Pollution\":0},{\"id\":1,\"latitude\":43.853599,\"longitude\":18.405989,\"Temperature\":12,\"Humidity\":12,\"Pollution\":0.02},{\"id\":1,\"latitude\":43.853599,\"longitude\":18.405989,\"Temperature\":25,\"Humidity\":25,\"Pollution\":0.03},{\"id\":1,\"latitude\":43.853599,\"longitude\":18.405989,\"Temperature\":25,\"Humidity\":24,\"Pollution\":0.03},{\"id\":1,\"latitude\":43.853599,\"longitude\":18.405989,\"Temperature\":25,\"Humidity\":24,\"Pollution\":0.04},{\"id\":1,\"latitude\":43.853599,\"longitude\":18.405989,\"Temperature\":24,\"Humidity\":24,\"Pollution\":0},{\"id\":1,\"latitude\":43.853599,\"longitude\":18.405989,\"Temperature\":12,\"Humidity\":12,\"Pollution\":0},{\"id\":1,\"latitude\":43.853599,\"longitude\":18.405989,\"Temperature\":24,\"Humidity\":25,\"Pollution\":0.53},{\"id\":1,\"latitude\":43.853599,\"longitude\":18.405989,\"Temperature\":24,\"Humidity\":26,\"Pollution\":0.53},{\"id\":1,\"latitude\":43.853599,\"longitude\":18.405989,\"Temperature\":31,\"Humidity\":25,\"Pollution\":0.03},{\"id\":1,\"latitude\":43.853599,\"longitude\":18.405989,\"Temperature\":31,\"Humidity\":25,\"Pollution\":0.04},{\"id\":1,\"latitude\":43.853599,\"longitude\":18.405989,\"Temperature\":24,\"Humidity\":25,\"Pollution\":0.04},{\"id\":1,\"latitude\":43.853599,\"longitude\":18.405989,\"Temperature\":24,\"Humidity\":25,\"Pollution\":0.03},{\"id\":1,\"latitude\":43.853599,\"longitude\":18.405989,\"Temperature\":24,\"Humidity\":24,\"Pollution\":0.04},{\"id\":1,\"latitude\":43.853599,\"longitude\":18.405989,\"Temperature\":11,\"Humidity\":12,\"Pollution\":0},{\"id\":1,\"latitude\":43.853599,\"longitude\":18.405989,\"Temperature\":24,\"Humidity\":26,\"Pollution\":0.11},{\"id\":1,\"latitude\":43.853599,\"longitude\":18.405989,\"Temperature\":24,\"Humidity\":26,\"Pollution\":0.02},{\"id\":1,\"latitude\":43.853599,\"longitude\":18.405989,\"Temperature\":24,\"Humidity\":26,\"Pollution\":0.04},{\"id\":1,\"latitude\":43.853599,\"longitude\":18.405989,\"Temperature\":24,\"Humidity\":26,\"Pollution\":0.03},{\"id\":1,\"latitude\":43.853599,\"longitude\":18.405989,\"Temperature\":24,\"Humidity\":27,\"Pollution\":0.05},{\"id\":1,\"latitude\":43.853599,\"longitude\":18.405989,\"Temperature\":24,\"Humidity\":27,\"Pollution\":0.03},{\"id\":1,\"latitude\":43.853599,\"longitude\":18.405989,\"Temperature\":24,\"Humidity\":27,\"Pollution\":0.02},{\"id\":1,\"latitude\":43.853599,\"longitude\":18.405989,\"Temperature\":24,\"Humidity\":27,\"Pollution\":0.04},{\"id\":1,\"latitude\":43.853599,\"longitude\":18.405989,\"Temperature\":24,\"Humidity\":27,\"Pollution\":0},{\"id\":1,\"latitude\":43.853599,\"longitude\":18.405989,\"Temperature\":24,\"Humidity\":28,\"Pollution\":0.02},{\"id\":1,\"latitude\":43.853599,\"longitude\":18.405989,\"Temperature\":24,\"Humidity\":28,\"Pollution\":0.04},{\"id\":1,\"latitude\":43.853599,\"longitude\":18.405989,\"Temperature\":24,\"Humidity\":28,\"Pollution\":0.03},{\"id\":1,\"latitude\":43.853599,\"longitude\":18.405989,\"Temperature\":24,\"Humidity\":29,\"Pollution\":0.02},{\"id\":1,\"latitude\":43.853599,\"longitude\":18.405989,\"Temperature\":24,\"Humidity\":29,\"Pollution\":0.04},{\"id\":1,\"latitude\":43.853599,\"longitude\":18.405989,\"Temperature\":24,\"Humidity\":29,\"Pollution\":0.03},{\"id\":1,\"latitude\":43.853599,\"longitude\":18.405989,\"Temperature\":24,\"Humidity\":30,\"Pollution\":0.05},{\"id\":1,\"latitude\":43.853599,\"longitude\":18.405989,\"Temperature\":24,\"Humidity\":30,\"Pollution\":0.02},{\"id\":1,\"latitude\":43.853599,\"longitude\":18.405989,\"Temperature\":24,\"Humidity\":30,\"Pollution\":0.04},{\"id\":1,\"latitude\":43.853599,\"longitude\":18.405989,\"Temperature\":24,\"Humidity\":30,\"Pollution\":0.03},{\"id\":1,\"latitude\":43.853599,\"longitude\":18.405989,\"Temperature\":24,\"Humidity\":31,\"Pollution\":0.02},{\"id\":1,\"latitude\":43.853599,\"longitude\":18.405989,\"Temperature\":24,\"Humidity\":31,\"Pollution\":0.05},{\"id\":1,\"latitude\":43.853599,\"longitude\":18.405989,\"Temperature\":24,\"Humidity\":31,\"Pollution\":0.04},{\"id\":1,\"latitude\":43.853599,\"longitude\":18.405989,\"Temperature\":24,\"Humidity\":31,\"Pollution\":0.03},{\"id\":1,\"latitude\":43.853599,\"longitude\":18.405989,\"Temperature\":24,\"Humidity\":40,\"Pollution\":0.04},{\"id\":1,\"latitude\":43.853599,\"longitude\":18.405989,\"Temperature\":24,\"Humidity\":40,\"Pollution\":0.03},{\"id\":1,\"latitude\":43.853599,\"longitude\":18.405989,\"Temperature\":12,\"Humidity\":24,\"Pollution\":0.04},{\"id\":1,\"latitude\":43.853599,\"longitude\":18.405989,\"Temperature\":12,\"Humidity\":25,\"Pollution\":0.03},{\"id\":1,\"latitude\":43.853599,\"longitude\":18.405989,\"Temperature\":12,\"Humidity\":25,\"Pollution\":0.04},{\"id\":1,\"latitude\":43.853599,\"longitude\":18.405989,\"Temperature\":12,\"Humidity\":27,\"Pollution\":0.04},{\"id\":1,\"latitude\":43.853599,\"longitude\":18.405989,\"Temperature\":12,\"Humidity\":28,\"Pollution\":0.03},{\"id\":1,\"latitude\":43.853599,\"longitude\":18.405989,\"Temperature\":13,\"Humidity\":28,\"Pollution\":0.04},{\"id\":1,\"latitude\":43.853599,\"longitude\":18.405989,\"Temperature\":13,\"Humidity\":29,\"Pollution\":0.04},{\"id\":1,\"latitude\":43.853599,\"longitude\":18.405989,\"Temperature\":13,\"Humidity\":30,\"Pollution\":0.03},{\"id\":1,\"latitude\":43.853599,\"longitude\":18.405989,\"Temperature\":13,\"Humidity\":24,\"Pollution\":0.04},{\"id\":1,\"latitude\":43.853599,\"longitude\":18.405989,\"Temperature\":13,\"Humidity\":26,\"Pollution\":0.05},{\"id\":1,\"latitude\":43.853599,\"longitude\":18.405989,\"Temperature\":13,\"Humidity\":28,\"Pollution\":0.53},{\"id\":1,\"latitude\":43.853599,\"longitude\":18.405989,\"Temperature\":13,\"Humidity\":28,\"Pollution\":0.03},{\"id\":1,\"latitude\":43.853599,\"longitude\":18.405989,\"Temperature\":12,\"Humidity\":26,\"Pollution\":0.04},{\"id\":1,\"latitude\":43.853599,\"longitude\":18.405989,\"Temperature\":12,\"Humidity\":31,\"Pollution\":0.03},{\"id\":1,\"latitude\":43.853599,\"longitude\":18.405989,\"Temperature\":11,\"Humidity\":25,\"Pollution\":0.04},{\"id\":1,\"latitude\":43.853599,\"longitude\":18.405989,\"Temperature\":60,\"Humidity\":60,\"Pollution\":0.01},{\"id\":1,\"latitude\":43.853599,\"longitude\":18.405989,\"Temperature\":28,\"Humidity\":0,\"Pollution\":0},{\"id\":1,\"latitude\":43.853599,\"longitude\":18.405989,\"Temperature\":11,\"Humidity\":14,\"Pollution\":0.04},{\"id\":1,\"latitude\":43.853599,\"longitude\":18.405989,\"Temperature\":11,\"Humidity\":14,\"Pollution\":0.03},{\"id\":1,\"latitude\":43.853599,\"longitude\":18.405989,\"Temperature\":61,\"Humidity\":61,\"Pollution\":0.05},{\"id\":1,\"latitude\":43.853599,\"longitude\":18.405989,\"Temperature\":61,\"Humidity\":60,\"Pollution\":0},{\"id\":1,\"latitude\":43.853599,\"longitude\":18.405989,\"Temperature\":31,\"Humidity\":30,\"Pollution\":0.03},{\"id\":1,\"latitude\":43.853599,\"longitude\":18.405989,\"Temperature\":11,\"Humidity\":15,\"Pollution\":0.05},{\"id\":1,\"latitude\":43.853599,\"longitude\":18.405989,\"Temperature\":11,\"Humidity\":15,\"Pollution\":0.03},{\"id\":1,\"latitude\":43.853599,\"longitude\":18.405989,\"Temperature\":11,\"Humidity\":15,\"Pollution\":0.04},{\"id\":1,\"latitude\":43.853599,\"longitude\":18.405989,\"Temperature\":31,\"Humidity\":30,\"Pollution\":0.04},{\"id\":1,\"latitude\":43.853599,\"longitude\":18.405989,\"Temperature\":31,\"Humidity\":31,\"Pollution\":0.05},{\"id\":1,\"latitude\":43.853599,\"longitude\":18.405989,\"Temperature\":31,\"Humidity\":31,\"Pollution\":0.02},{\"id\":1,\"latitude\":43.853599,\"longitude\":18.405989,\"Temperature\":31,\"Humidity\":31,\"Pollution\":0.04},{\"id\":1,\"latitude\":43.853599,\"longitude\":18.405989,\"Temperature\":31,\"Humidity\":31,\"Pollution\":0.03},{\"id\":1,\"latitude\":43.853599,\"longitude\":18.405989,\"Temperature\":31,\"Humidity\":40,\"Pollution\":0.05},{\"id\":1,\"latitude\":43.853599,\"longitude\":18.405989,\"Temperature\":31,\"Humidity\":40,\"Pollution\":0.03},{\"id\":1,\"latitude\":43.853599,\"longitude\":18.405989,\"Temperature\":31,\"Humidity\":40,\"Pollution\":0.04},{\"id\":1,\"latitude\":43.853599,\"longitude\":18.405989,\"Temperature\":30,\"Humidity\":40,\"Pollution\":0.05},{\"id\":1,\"latitude\":43.853599,\"longitude\":18.405989,\"Temperature\":30,\"Humidity\":41,\"Pollution\":0.02},{\"id\":1,\"latitude\":43.853599,\"longitude\":18.405989,\"Temperature\":30,\"Humidity\":42,\"Pollution\":0.03},{\"id\":1,\"latitude\":43.853599,\"longitude\":18.405989,\"Temperature\":30,\"Humidity\":42,\"Pollution\":0.05},{\"id\":1,\"latitude\":43.853599,\"longitude\":18.405989,\"Temperature\":30,\"Humidity\":42,\"Pollution\":0.04},{\"id\":1,\"latitude\":43.853599,\"longitude\":18.405989,\"Temperature\":30,\"Humidity\":43,\"Pollution\":0.02},{\"id\":1,\"latitude\":43.853599,\"longitude\":18.405989,\"Temperature\":30,\"Humidity\":43,\"Pollution\":0.03},{\"id\":1,\"latitude\":43.853599,\"longitude\":18.405989,\"Temperature\":29,\"Humidity\":45,\"Pollution\":0.03},{\"id\":1,\"latitude\":43.853599,\"longitude\":18.405989,\"Temperature\":29,\"Humidity\":44,\"Pollution\":0.02},{\"id\":1,\"latitude\":43.853599,\"longitude\":18.405989,\"Temperature\":30,\"Humidity\":45,\"Pollution\":0.04},{\"id\":1,\"latitude\":43.853599,\"longitude\":18.405989,\"Temperature\":30,\"Humidity\":45,\"Pollution\":0.03},{\"id\":1,\"latitude\":43.853599,\"longitude\":18.405989,\"Temperature\":30,\"Humidity\":44,\"Pollution\":0.03},{\"id\":1,\"latitude\":43.853599,\"longitude\":18.405989,\"Temperature\":29,\"Humidity\":45,\"Pollution\":0.04},{\"id\":1,\"latitude\":43.853599,\"longitude\":18.405989,\"Temperature\":29,\"Humidity\":44,\"Pollution\":0.03},{\"id\":1,\"latitude\":43.853599,\"longitude\":18.405989,\"Temperature\":29,\"Humidity\":44,\"Pollution\":0.05},{\"id\":1,\"latitude\":43.853599,\"longitude\":18.405989,\"Temperature\":30,\"Humidity\":44,\"Pollution\":0.05},{\"id\":1,\"latitude\":43.853599,\"longitude\":18.405989,\"Temperature\":30,\"Humidity\":44,\"Pollution\":0.04},{\"id\":1,\"latitude\":43.853599,\"longitude\":18.405989,\"Temperature\":30,\"Humidity\":42,\"Pollution\":0},{\"id\":1,\"latitude\":43.853599,\"longitude\":18.405989,\"Temperature\":31,\"Humidity\":57,\"Pollution\":0.04},{\"id\":1,\"latitude\":43.853599,\"longitude\":18.405989,\"Temperature\":30,\"Humidity\":45,\"Pollution\":0.05},{\"id\":1,\"latitude\":43.853599,\"longitude\":18.405989,\"Temperature\":29,\"Humidity\":44,\"Pollution\":0.04},{\"id\":1,\"latitude\":43.853599,\"longitude\":18.405989,\"Temperature\":29,\"Humidity\":41,\"Pollution\":0.03},{\"id\":1,\"latitude\":43.853599,\"longitude\":18.405989,\"Temperature\":29,\"Humidity\":41,\"Pollution\":0.05},{\"id\":1,\"latitude\":43.853599,\"longitude\":18.405989,\"Temperature\":29,\"Humidity\":41,\"Pollution\":0.04},{\"id\":1,\"latitude\":43.853599,\"longitude\":18.405989,\"Temperature\":29,\"Humidity\":29,\"Pollution\":0},{\"id\":1,\"latitude\":43.853599,\"longitude\":18.405989,\"Temperature\":30,\"Humidity\":41,\"Pollution\":0.06},{\"id\":1,\"latitude\":43.853599,\"longitude\":18.405989,\"Temperature\":30,\"Humidity\":41,\"Pollution\":0.03},{\"id\":1,\"latitude\":43.853599,\"longitude\":18.405989,\"Temperature\":30,\"Humidity\":41,\"Pollution\":0.05},{\"id\":1,\"latitude\":43.853599,\"longitude\":18.405989,\"Temperature\":30,\"Humidity\":40,\"Pollution\":0.03},{\"id\":1,\"latitude\":43.853599,\"longitude\":18.405989,\"Temperature\":30,\"Humidity\":40,\"Pollution\":0.04},{\"id\":1,\"latitude\":43.853599,\"longitude\":18.405989,\"Temperature\":30,\"Humidity\":41,\"Pollution\":0.04},{\"id\":1,\"latitude\":43.853599,\"longitude\":18.405989,\"Temperature\":11,\"Humidity\":11,\"Pollution\":0},{\"id\":1,\"latitude\":43.853599,\"longitude\":18.405989,\"Temperature\":11,\"Humidity\":24,\"Pollution\":0.03},{\"id\":1,\"latitude\":43.853599,\"longitude\":18.405989,\"Temperature\":11,\"Humidity\":24,\"Pollution\":0.04},{\"id\":1,\"latitude\":43.853599,\"longitude\":18.405989,\"Temperature\":11,\"Humidity\":24,\"Pollution\":0.05},{\"id\":1,\"latitude\":43.853599,\"longitude\":18.405989,\"Temperature\":30,\"Humidity\":30,\"Pollution\":0},{\"id\":1,\"latitude\":43.853599,\"longitude\":18.405989,\"Temperature\":30,\"Humidity\":31,\"Pollution\":0.04}]";
        }

        private async void Button_Click(object sender, RoutedEventArgs e)
        {
            try
            {
                
                HttpClient httpClient = new HttpClient();
                httpClient.DefaultRequestHeaders.Accept.TryParseAdd("application/json");
                string responseString = await httpClient.GetStringAsync(
                    new Uri("http://192.168.224.104:3000/load"));
                
                //string responseString = helperFunc();

                List<LocationReadings> dataFromDatabase = JsonConvert.DeserializeObject<List<LocationReadings>>(responseString);
                
            }
            catch (Exception ex)
            {

            }
        }
    }
}